프로토콜

통신의 약속 = 프로토콜
• 통신의 두 주체가 같은 프로토콜 쓴다면,
약속된 규칙으로 통신이 가능하다.

통신을 위해 양 상호간에 지켜야할 약속
• HW
장비 규칙 ,신호 전달 속도
• Format
신호의 형태
• Sequence
Handshake 방식
신호 전달 순서
• SW 동작
오류 검출을 위한 행동

->두 노드가 같은 프로토콜을 사용해야 통신이 가능

//
프로토콜을 공부하는 이유

통신 구현하기 전, 프로토콜을 완벽히 이해 해야 하는 이유
• 완벽한 통신 Application 제작 가능
• 통신 App을 위한 Library 제작 가능
• 프로토콜 내용대로 수행하는 Server 구축 가능

통신 규칙을 정확히 알아야, 프로그램을 정확히 만든다.
 네트워크 프로그래밍에서 프로토콜 내용의 대한 이해는 필수

/////////////////////////////
TCP/IP

IP(Internet Protocol)
• 송신 호스트와 수신 호스트가 정보를 주고받는데 사용하는 규약
• 패킷 혹은 데이터그램이라고 하는 덩어리로 나뉘어 전송
• 비 신뢰성, 비연결성

IP Address(Internet Protocol)
• 인터넷상에 있는 컴퓨터의 고유한 주소

IP 프로토콜의 한계

1. 비 연결성
   • 패킷을 받을 대상이 없거나 해당 도착지의 주소가 불능 상태여도 패킷을 전송
2. 비 신뢰성
   • 통신 도중 패킷이 사라질 수 있음
   • 패킷이 순서대로 도착하지 않을 수 있음
   Ex) A, B, C, D (전송) -> D, C, A, B (도착)

TCP
TCP (transmission Control Protocol)
• 전송 제어 프로토콜
• IP의 핵심 프로토콜 중 하나
• 연결 지향 (3 way handshake)
• 데이터 전달 보증
• 순서 보증
• 신뢰할 수 있는 프로토콜

UDP
UDP(User Datagram Protocol
• 하얀 도화지에 비유(기능이 거의 없음)
• 데이터 전달, 순서 보장 X
• 속도가 빠르다.(제약이 없기때문에)
• 최신 HTTP에서는 UDP를 채택

PORT

동시 다발적 통신을 위한 가상의 문을 뜻함
Port 사용예시 1
• IP 를 통해, 어떤 컴퓨팅 장치가 통신을 할 지 결정이 된다.
• 각 Node의 어떤 App에서 처리를 할 지 결정을 짓는데 Port가 사용된다.
Port 사용예시 2
• 웹서비스에서,
어떤 서비스를 선택할 지 포트번호에 따라 서버를 선택할 수 있다.

Port Number 구분

Well-known Port Number (0 ~ 1023)
• Document에서 Well-known 은 예약된 이라는 뜻으로 쓰인다.
• 80 / 443 : HTTP / HTTPS
• 22 : FTP / SSH
Registered Port (1024 ~ 49151)
• 여러 Tool이 쓰는 포트들
• 3306 : MySQL
• 8080 : HTTP 대체용
Dynamic Port (49152 ~ 65535)
• 필요할 때 마다 임의의 번호를 사용하는 곳

//////////////////////////
Ethernet

MAC 주소
기기마다 갖고 있는 고유 번호, 네트워크에서 기기를 구분하는 주소

Ethernet 통신 방법

1. 이더넷은 옛날 방식, 인터넷은 최근 방식. -> X
   • 규모가 작은 LAN 에서는 이더넷 통신을 한다.
   • 이더넷과 인터넷은 연결될 수도, 아닐 수도 있다.

2. 이더넷은 IP로 통신을 한다. -> X
   • LAN의 대표 통신 방법인 이더넷은
   IP 주소를 이용한 통신이 아닌, MAC 주소 기반 통신을 한다.

3. 이더넷은 TCP / IP 프로토콜을 사용한다. -> X
   • 인터넷은 TCP / IP 프로토콜 을 사용 (IP주소 기반 통신)
   • 이더넷은 CSMA/CD 프로토콜을 사용 (MAC 주소 기반 통신)

4. 이더넷을 위한 장비가 따로 존재한다. -> O
   • 이더넷 카드 필요
   • 이더넷 케이블 필요
   • LAN 규모의 대표적인 통신 이더넷은 사실상 표준이다.
   • 따라서, 이더넷 카드 / 이더넷 케이블을 랜카드 / 랜케이블 이라고도 부른다.

Ethernet
LAN 통신의 표준
• LAN 통신의 표준 (IEEE 802.3)
LAN 통신은 이더넷 말고, 토큰링, FDDI 등 존재는 한다.
LAN 규모의 통신은 거의 다 이더넷
• 이더넷이란?
CSMA / CD 프로토콜 을 쓰고 (MAC 주소 기반 통신)
이더넷 카드 장비가 있어야 하고
이더넷 케이블 을 사용하는 통신 방법

Ethernet Card / NIC
• NIC : Network Interface Controller
• NIC = 이더넷 카드 = 랜카드
• 컴퓨터와 네트워크를 연결시키기 위한 카드
• 대부분 메인보드에 내장되어 있다.

대역폭
주파수 개념일 때 대역폭
• 최대와 최소 주파수의 폭
• 폭이 넓을수록 정보를 한꺼번에 실을 수 있는 양이 커진다.
통신에서 대역폭
• 한번에 데이터를 전송할 수 있는 양

이더넷 케이블

1. UTP CABLE
   UTP Cable
   • Unshielded Twisted-Pair
   • 이더넷의 주류를 이루는 케이블
   • 오른쪽 사진, 투명 플라스틱 커넥터 = RJ_45 커넥터
2. STP CABLE
   STP Cable
   • UTP : Unshielded Twisted-Pair
   • STP : Shielded Twisted-Pair
   • EMI (방해전파) 방지를 위한 호일을 한번 더 감은 고급 케이블

UTP 케이블의 두 가지 종류
• 다이렉트 케이블 (일반적으로 많이 사용)
• 크로스 케이블
잘못 사용하면 통신이 안된다.
• Auto MDI
• 아무 케이블만 꽂아도, 잘 동작하는 기술
• 가정용 공유기와 PC들
• Auto MDI 지원
• 저렴이 임베디드 보드들
• Auto MDI 미지원

///////////////////////////////////////
CSMA/CD

LAN 에서 통신하는 방식
하나의 노드에서 다른 노드로 신호를 보낼 때 마다, 모든 노드에 모두 같은 신호를 보낸다.

CSMA / CD 프로토콜 동작 방식

1. 현재 네트워크에 통신이 되고있는지 Check
2. 사용가능할 때 까지 랜덤한 시간 기다림
3. 통신이 안 되고 있으면 통신을 시작
4. 만약 충돌이 발생한다면, 랜덤한 시간 이후 재전송

콜리젼 도메인

충돌이 발생할 수 있는 네트워크 범위 = 콜리젼 도메인
• LAN 네트워크는 모두 같은 콜리젼 도메인을 가진다.
• 연결되는 기기가 많아 질 수록 콜리젼 확률은 올라가 통신 효율이 떨어질 수 있다.

->네트워크 장비들을 사용해야 콜리젼 도메인을 축소시켜 원활한 통신이 가능

공유기
가정집에서는 공유기 하나면 된다.
공유기
• Home Router 라고도 한다.
• 가정에서 필요한, 여러 네트워크 장비를 통합한 가정용 라우터

Home Router의 한계
중대형 사무실급 네트워크 구축이 힘들다.
• Home Router는 대부분 포트가 적다.
• 공유기를 여러개 다량으로 연결하면, 속도가 느려지고 / 안정성이 떨어진다.
• 전용선 속도 커버 못함
• 네트워크 안정성 떨어짐

->연결할 PC가 많아지면 공유기 대신 라우터 / 스위치 등 다른 네트워크 장비로 네트워크를 구축한다.

리피터
통신 거리가 신호가 약해짐
• 신호를 읽고, 다시 신호 세기 / 잡음을 제거해주는 역할
• 단독으로 잘 안씀
• 다른 장치에 리피터 기능이 포함 되어있음

이더넷 허브
이더넷 허브
• 멀티포트 리피터 / 허브라고 부름
• 연결된 신호를 보내면, 모두 복사해서 전체에 전달해줌
• CSMA / CD 프로토콜을 사용
• 모두 같은 콜리젼 도메인에 있게 된다.
• PC 연결수가 많을 수록 콜리젼 확률이 커진다.

이더넷스위치
스위치
• 스위칭 허브 라고도 한다.
• 똑똑한 허브, 단순 복사해서 신호를 뿌리지 않는다.
• 똑똑한 허브인 스위치의 동작
• 평소에 각 포트별 어느 MAC이 연결되어 있는지 저장해둔다.
• 신호 내용을 분석하여, 어느 MAC을 찾는지 알아낸다.
• MAC이 있는 포트에만 신호를 전달해주는 장치->콜리전확률이대폭 축소된다.

라우터
내부 네트워크 연결 + 다른 네트워크로 나가는 출구(Gateway)
• 매우 똑똑한 스위치
• 스위치 처럼 내부 네트워크 연결이 가능하다.
• 내부 네트워크들과 외부 네트워크 연결이 가능하다.

[정리] 네트워크 구성
네트워크 구성
• ISP 업체에 전용 회선과 IP 할당
• 라우터 연결
• 게이트 웨이 역할 : 외부 네트워크 끼리 연결에 사용
• 외부 네트워크 : IP 기반 통신 (TCP / IP)
• 내부 네트워크 : MAC 기반 (CSMA / CD)
• 스위치
• MAC 기반으로 통신 데이터 전달
[정리] 네트워크구성

- 세그먼트 : 한 네트워크에서 더 작은 구역으로 나눈 구역

//////////
홈 네트워크

라우터와 스위치
가장 기본적인 네트워크 장비
• 라우터 : 네트워크를 구분짓고 연결한다.
• 스위치 : 여러대 컴퓨터를 네트워크에 연결하고
데이터 전송을 수행한다.

홈 라우터에 있는 포트
LAN 포트 : 내부 인터넷 연결
WAN 포트 : 더 큰 외부 망 연결

홈네트워크(Home Network)
가정 내 다양한 기기들이 상호 간에 유/무선 네트워크를 통해 커뮤니케이션 하고 외부에서 인터넷을 통해 접속이 가능한 환경을 구축하는 것

유선연결( Direct )

1. 이더넷 ( RJ-45 / 인터넷 선 )
   • LAN에서 가장 많이 사용되는 규격
   • 벽면에 단자가 있다
2. 전화선 ( RJ-11 )
   • 이더넷 이전 전화선이 그 역할을 대신했다
   • 현재는 FAX 송수신 용도로 사용한다

무선연결( Wireless )

1. Wi-Fi
   • Wi-Fi Alliance를 통해 표준화 됨
   • 공유기? → 라우터!
2. 블루투스
   • 근거리 무선 통신 표준

무선 네트워크 제품군

1. 유무선 공유기
   • wifi 기능 내장
   • WAN → 통신사 유선
   • LAN → 분할
2. 무선확장/증폭기
   • 무선 신호가 닿지 않을 때 사용
3. 무선 랜카드
   • 무선 통신 모듈이 탑재되지 않은 전자 기기용
   • 개인 PC에서 wifi 연결 시 사용

리눅스 네트워킹 프로그래밍

서버
Client들이 접속하여 쓸 수 있는 시스템
• 특징1. 대부분 무중단 운영
• 특징2. 대용량 트래픽 처리

특정 역할의 서버
각 서버는 역할이 존재
• Client 들에게 HTTP 문서를 전달주는 컴퓨터 : 웹 서버
• Client 들에게 DB 를 관리하는 서버 : DB 서버
• Client 들의 게임 데이터를 관리 & 처리 해주는 컴퓨터 : 게임 서버

개인용PC 하나에 여러개의 서버로 활용

하나의 PC는 여러 역할의 서버 될 수 있다.
• 하나의 PC는 개인용 PC 이면서
• DB 서버이면서,
• 파일 서버이면서,
• 게임 서버
단점
• 개인용 PC를 계속 켜두어야 함.
• 개인용 자료가 유출 될 수 있음.
• 개인 PC에서 게임을 돌리면, 모든 서버들 속도가 낮아짐

여러개의 서버를 하나의 PC로 2
여러 역할을 하는 서버 한 대를 둔다.
• 개인 PC는 자유롭게 사용
• 서버용 컴퓨터는 항상 켜둔다.
• 컴퓨터 한대 비용, 관리가 편하다.
단점
• 누군가 파일 서버에서 다운로드를 받고 있으면,
웹이 먹통이다

여러개의 서버를 하나의 PC로 3
웹은 따로 / 파일서버는 따로
• 서버 컴퓨터 2 대 사용
• 파일 서버는 안쓸 때 저전력 모드로 진입
• 웹 속도가 빠르다.
단점
• 보안에 취약하다. 웹이 뚫리면 DB도 위험 가능성
• 2 대 서버 컴퓨터 비용 발생

여러개의 서버를 하나의 PC로 4
모든 서버를 따로 시스템을 둔다.
• 보안에 안전하다.
• 간섭으로 인한 속도 저하가 없다.
단점
• 관리가 힘들다.
• 3 대 서버 컴퓨터 비용 발생

핸드폰을 서버로
전기비 저렴한 웹 서버 운영 방법
• 안쓰는 핸드폰 사용
• 웹 서버 App 하나만 설치하면 된다.
유지비 저렴한 NAS 사용 방법
• 안쓰는 핸드폰 사용
• 파일 서버 App 하나만 설치하면 된다.

[참고] 로드밸런싱

웹 서버 한대가 처리할 수 있는 트래픽
• 접속자가 많아지면 다음 문제로 성능 이슈 발생

1. 네트워크 회선 문제
2. SSD Read 성능 문제
   • 오른쪽 그림처럼 웹서버를 여러대 두고,분할로 접속하도록 L4 스위치 구성하면 속도가 3 배 빨라짐
   • 하나의 웹 서버가 죽었을 때, 무중단 운영이 가능


사무실 내 서버 무중단 운영

서버는 무중단 운영이 기본
• 인터넷 접속 불가 == 영업정지
• 고장이 발생하지 않아야 한다. (먼지로 인한 고장 방지 필요)
• 회선이 좋아, bps 및 트래픽이 좋아야 한다.
• 건물 정전으로 전력이 나가는 일이 없어야 한다.

사무실에서 전산실 운영
적정 온도 / 습도 유지 (반도체 오작동 방지)
• 항온항습시스템 (21 ~ 24도 / 습도 50% 유지)
• 공기 여과기 필수
UPS 설치
• 비상전력시스템
물리적 보안
• 세콤 / 세스코

전산실 운영
서버관리자
• 비상사태 대기로 3 교대 3명
서버랙
• 안정적인 전원 공급
• 먼지 관리
사무실 월세
• 서버 관리자 및 랙이 차지하고 있는 공간

코로케이션(IDC 입주서비스)
전산실의 대여 
• 서버계의 하숙집 
• 전산실 필수 도구 구비완비 
->전기비 빠른 전용선 안정적 전력 
• 추가서비스 
방화벽 위탁운영 백업 서비스